<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ke Ao Teensy Flight Software: Artemis::Devices Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ke Ao Teensy Flight Software
   </div>
   <div id="projectbrief">The software on the Teensy in the Ke Ao cubesat.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classArtemis_1_1Devices.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classArtemis_1_1Devices-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Artemis::Devices Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The class representing sensors and devices in the satellite.  
 <a href="classArtemis_1_1Devices.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="artemis__devices_8h_source.html">artemis_devices.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2f535000159f58b1b6d07e6221bc2b6d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#a2f535000159f58b1b6d07e6221bc2b6d">setup_magnetometer</a> (void)</td></tr>
<tr class="memdesc:a2f535000159f58b1b6d07e6221bc2b6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up I2C connection to magnetometer.  <br /></td></tr>
<tr class="separator:a2f535000159f58b1b6d07e6221bc2b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a8d56b28548cb26e3247c34d32b9614"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#a8a8d56b28548cb26e3247c34d32b9614">read_mag</a> (uint32_t uptime)</td></tr>
<tr class="memdesc:a8a8d56b28548cb26e3247c34d32b9614"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads magnetometer and generates a packet on both RFM23 and Astrodev queues.  <br /></td></tr>
<tr class="separator:a8a8d56b28548cb26e3247c34d32b9614"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae32e2b6b79a711a447a4f64f51b70de1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#ae32e2b6b79a711a447a4f64f51b70de1">setup_imu</a> (void)</td></tr>
<tr class="memdesc:ae32e2b6b79a711a447a4f64f51b70de1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up I2C connection to IMU.  <br /></td></tr>
<tr class="separator:ae32e2b6b79a711a447a4f64f51b70de1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb276846201b2ebfbe0d102f1c0374e0"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#acb276846201b2ebfbe0d102f1c0374e0">read_imu</a> (uint32_t uptime)</td></tr>
<tr class="memdesc:acb276846201b2ebfbe0d102f1c0374e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads IMU and generates a packet on both RFM23 and Astrodev queues.  <br /></td></tr>
<tr class="separator:acb276846201b2ebfbe0d102f1c0374e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a887fc3eb3771301d8c2f9b578d0ef9b2"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#a887fc3eb3771301d8c2f9b578d0ef9b2">setup_current</a> (void)</td></tr>
<tr class="memdesc:a887fc3eb3771301d8c2f9b578d0ef9b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up I2C connection to current sensors.  <br /></td></tr>
<tr class="separator:a887fc3eb3771301d8c2f9b578d0ef9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad37451eb58f3f6cec1db263ce86077bb"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#ad37451eb58f3f6cec1db263ce86077bb">read_current</a> (uint32_t uptime)</td></tr>
<tr class="memdesc:ad37451eb58f3f6cec1db263ce86077bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads current sensors and generates two packets on both RFM23 and Astrodev queues.  <br /></td></tr>
<tr class="separator:ad37451eb58f3f6cec1db263ce86077bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e58b356d463dc4003faa85a1243d391"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#a6e58b356d463dc4003faa85a1243d391">setup_temperature</a> (void)</td></tr>
<tr class="memdesc:a6e58b356d463dc4003faa85a1243d391"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up analog connection to temperature sensors.  <br /></td></tr>
<tr class="separator:a6e58b356d463dc4003faa85a1243d391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac14e26026104c4f5271c1e0bacd0fed5"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#ac14e26026104c4f5271c1e0bacd0fed5">read_temperature</a> (uint32_t uptime)</td></tr>
<tr class="memdesc:ac14e26026104c4f5271c1e0bacd0fed5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads temperature sensors and generates a packet on both RFM23 and Astrodev queues.  <br /></td></tr>
<tr class="separator:ac14e26026104c4f5271c1e0bacd0fed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0c1daf5354a81cbca5a0f3a99bd3dc1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#ab0c1daf5354a81cbca5a0f3a99bd3dc1">setup_gps</a> (void)</td></tr>
<tr class="memdesc:ab0c1daf5354a81cbca5a0f3a99bd3dc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up serial connection to GPS sensor.  <br /></td></tr>
<tr class="separator:ab0c1daf5354a81cbca5a0f3a99bd3dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12f7f17c8600042480c90568d87df99a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#a12f7f17c8600042480c90568d87df99a">update_gps</a> (void)</td></tr>
<tr class="memdesc:a12f7f17c8600042480c90568d87df99a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to update the GPS.  <br /></td></tr>
<tr class="separator:a12f7f17c8600042480c90568d87df99a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01e1ba8f307f3df4364fb9610c33bbc3"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#a01e1ba8f307f3df4364fb9610c33bbc3">read_gps</a> (uint32_t uptime)</td></tr>
<tr class="memdesc:a01e1ba8f307f3df4364fb9610c33bbc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads GPS sensor and generates a packet on both RFM23 and Astrodev queues.  <br /></td></tr>
<tr class="separator:a01e1ba8f307f3df4364fb9610c33bbc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aa67440d9fdf0e0e77b76f86540bddf35"><td class="memItemLeft" align="right" valign="top">Adafruit_LIS3MDL *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#aa67440d9fdf0e0e77b76f86540bddf35">magnetometer</a> = new Adafruit_LIS3MDL()</td></tr>
<tr class="memdesc:aa67440d9fdf0e0e77b76f86540bddf35"><td class="mdescLeft">&#160;</td><td class="mdescRight">The satellite's magnetometer.  <br /></td></tr>
<tr class="separator:aa67440d9fdf0e0e77b76f86540bddf35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d6b3415c54dd311e1181ecab7183322"><td class="memItemLeft" align="right" valign="top">Adafruit_LSM6DSOX *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#a1d6b3415c54dd311e1181ecab7183322">imu</a> = new Adafruit_LSM6DSOX()</td></tr>
<tr class="memdesc:a1d6b3415c54dd311e1181ecab7183322"><td class="mdescLeft">&#160;</td><td class="mdescRight">The satellite's IMU.  <br /></td></tr>
<tr class="separator:a1d6b3415c54dd311e1181ecab7183322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a646e84ab1e3f13c57a51e1302fda8269"><td class="memItemLeft" align="right" valign="top">Adafruit_GPS *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#a646e84ab1e3f13c57a51e1302fda8269">gps</a> = new Adafruit_GPS(&amp;Serial7)</td></tr>
<tr class="memdesc:a646e84ab1e3f13c57a51e1302fda8269"><td class="mdescLeft">&#160;</td><td class="mdescRight">The satellite's IMU.  <br /></td></tr>
<tr class="separator:a646e84ab1e3f13c57a51e1302fda8269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3b13097be758edcc113db85741cd1a"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, Adafruit_INA219 * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#aac3b13097be758edcc113db85741cd1a">current_sensors</a></td></tr>
<tr class="memdesc:aac3b13097be758edcc113db85741cd1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mapping between current sensor string names and current sensor objects.  <br /></td></tr>
<tr class="separator:aac3b13097be758edcc113db85741cd1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa506caf5a58d33d863f91a638fe23952"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices.html#aa506caf5a58d33d863f91a638fe23952">temp_sensors</a></td></tr>
<tr class="memdesc:aa506caf5a58d33d863f91a638fe23952"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mapping between temperature sensor string names and their analog pins.  <br /></td></tr>
<tr class="separator:aa506caf5a58d33d863f91a638fe23952"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The class representing sensors and devices in the satellite. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>There is both an <a class="el" href="classArtemis_1_1Devices.html" title="The class representing sensors and devices in the satellite.">Artemis::Devices</a> namespace and an <a class="el" href="classArtemis_1_1Devices.html" title="The class representing sensors and devices in the satellite.">Artemis::Devices</a> class. Rename or combine these. </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad37451eb58f3f6cec1db263ce86077bb" name="ad37451eb58f3f6cec1db263ce86077bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad37451eb58f3f6cec1db263ce86077bb">&#9670;&#160;</a></span>read_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::read_current </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uptime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads current sensors and generates two packets on both RFM23 and Astrodev queues. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uptime</td><td>The time, in milliseconds, that the Teensy has been powered on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int32_t Always returns 0. </dd></dl>
<p>A single packet is used in this function. It is copied as needed. Two current beacons are created, to hold all the current measurements.</p>
<p>The packet's header information is filled out, identifying the originator node, destination node, and packet type.</p>
<p>The current sensors are iterated over. Each sensor is polled for its bus voltage and current. The first few sensors, defined by <a class="el" href="artemis__defs_8h.html#a69799b0a5a16e327c77608d3cae7dbb0">ARTEMIS_CURRENT_BEACON_1_COUNT</a>, are stored in the first current beacon's array, with the remainder stored in the second current beacon's array.</p>
<p>The first beacon is given an identifier value, then copied into the into the payload of the packet. The packet is then copied into the RFM23 and Astrodev queues for transmission.</p>
<p>The second beacon is given an identifier value, then copied into the into the payload of the packet. The packet is then copied into the RFM23 and Astrodev queues for transmission.</p>

</div>
</div>
<a id="a01e1ba8f307f3df4364fb9610c33bbc3" name="a01e1ba8f307f3df4364fb9610c33bbc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01e1ba8f307f3df4364fb9610c33bbc3">&#9670;&#160;</a></span>read_gps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::read_gps </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uptime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads GPS sensor and generates a packet on both RFM23 and Astrodev queues. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uptime</td><td>The time, in milliseconds, that the Teensy has been powered on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int32_t Always returns 0.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000033">Todo:</a></b></dt><dd>Not fully implemented. Store in beacons / internal structures </dd></dl>

</div>
</div>
<a id="acb276846201b2ebfbe0d102f1c0374e0" name="acb276846201b2ebfbe0d102f1c0374e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb276846201b2ebfbe0d102f1c0374e0">&#9670;&#160;</a></span>read_imu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::read_imu </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uptime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads IMU and generates a packet on both RFM23 and Astrodev queues. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uptime</td><td>The time, in milliseconds, that the Teensy has been powered on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int32_t Always returns 0. </dd></dl>
<p>A packet and IMU beacon are created. The beacon is given an identification value.</p>
<p>The accelerometer and gyroscope are polled for their most recent measurements. These measurements are then saved in the IMU beacon.</p>
<p>The packet's header information is filled out, identifying the originator node, destination node, and packet type. The beacon is then copied into the payload of the packet. The packet is then copied into the RFM23 and Astrodev queues for transmission.</p>

</div>
</div>
<a id="a8a8d56b28548cb26e3247c34d32b9614" name="a8a8d56b28548cb26e3247c34d32b9614"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a8d56b28548cb26e3247c34d32b9614">&#9670;&#160;</a></span>read_mag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::read_mag </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uptime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads magnetometer and generates a packet on both RFM23 and Astrodev queues. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uptime</td><td>The time, in milliseconds, that the Teensy has been powered on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int32_t Always returns 0. </dd></dl>
<p>A packet and magnetometer beacon are created. The beacon is given an identification value.</p>
<p>The magnetometer is polled for its most recent measurement. This measurement is then saved in the magnetometer beacon.</p>
<p>The packet's header information is filled out, identifying the originator node, destination node, and packet type. The beacon is then copied into the payload of the packet. The packet is then copied into the RFM23 and Astrodev queues for transmission.</p>

</div>
</div>
<a id="ac14e26026104c4f5271c1e0bacd0fed5" name="ac14e26026104c4f5271c1e0bacd0fed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac14e26026104c4f5271c1e0bacd0fed5">&#9670;&#160;</a></span>read_temperature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::read_temperature </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uptime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads temperature sensors and generates a packet on both RFM23 and Astrodev queues. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uptime</td><td>The time, in milliseconds, that the Teensy has been powered on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int32_t Always returns 0. </dd></dl>
<p>A packet and temperature beacon are created. The beacon is given an identification value.</p>
<p>Each temperature sensor is iterated over. It is read via its analog pin, with that raw voltage reading converted to Celcius. It is then stored in the temperature beacon's array.</p>
<p>The packet's header information is filled out, identifying the originator node, destination node, and packet type. The beacon is then copied into the payload of the packet. The packet is then copied into the RFM23 and Astrodev queues for transmission.</p>

</div>
</div>
<a id="a887fc3eb3771301d8c2f9b578d0ef9b2" name="a887fc3eb3771301d8c2f9b578d0ef9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a887fc3eb3771301d8c2f9b578d0ef9b2">&#9670;&#160;</a></span>setup_current()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::setup_current </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up I2C connection to current sensors. </p>
<dl class="section return"><dt>Returns</dt><dd>int32_t Returns 0 if sucessful, -1 if failed.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000031">Todo:</a></b></dt><dd>go through library and see what we need to configure and callibrate </dd></dl>

</div>
</div>
<a id="ab0c1daf5354a81cbca5a0f3a99bd3dc1" name="ab0c1daf5354a81cbca5a0f3a99bd3dc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0c1daf5354a81cbca5a0f3a99bd3dc1">&#9670;&#160;</a></span>setup_gps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::setup_gps </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up serial connection to GPS sensor. </p>
<dl class="section return"><dt>Returns</dt><dd>int32_t Always returns 0. </dd></dl>
<p>The serial connection to the GPS module is initialized.</p>
<p>The output format of the GPS is set. Possible options are:</p><ul>
<li>PMTK_SET_NMEA_OUTPUT_GLLONLY: Latitude, longitude, UTC time of position fix and status.</li>
<li>PMTK_SET_NMEA_OUTPUT_RMCONLY: Time, date, position, course, speed data.</li>
<li>PMTK_SET_NMEA_OUTPUT_VTGONLY: Course, speed information relative to the ground.</li>
<li>PMTK_SET_NMEA_OUTPUT_GGAONLY: Time, position, fix type data.</li>
<li>PMTK_SET_NMEA_OUTPUT_GSAONLY: GPS receiver operating mode, satellites used in the position solution, DOP values.</li>
<li>PMTK_SET_NMEA_OUTPUT_GSVONLY: Number of satellites in view, satellite ID numbers, elevation, azimuth, SNR values.</li>
<li>PMTK_SET_NMEA_OUTPUT_RMCGGA: Time, date, position, course and speed data.</li>
<li>PMTK_SET_NMEA_OUTPUT_RMCGGAGSA: Time, date, position, course and speed data, GPS receiver operating mode, satellites used in the position solution, DOP values, Global positioning system fix data (time, position, fix type data).</li>
<li>PMTK_SET_NMEA_OUTPUT_ALLDATA: All possible data from the GPS module.</li>
<li>PMTK_SET_NMEA_OUTPUT_OFF: Disable GPS output.</li>
</ul>
<p>The update rate of the GPS is set. Possible options are:</p><ul>
<li>PMTK_SET_NMEA_UPDATE_100_MILLIHERTZ: Once every 10 seconds, 100 millihertz.</li>
<li>PMTK_SET_NMEA_UPDATE_200_MILLIHERTZ: Once every 5 seconds, 200 millihertz.</li>
<li>PMTK_SET_NMEA_UPDATE_1HZ: 1 Hz</li>
<li>PMTK_SET_NMEA_UPDATE_2HZ: 2 Hz</li>
<li>PMTK_SET_NMEA_UPDATE_5HZ: 5 Hz</li>
<li>PMTK_SET_NMEA_UPDATE_10HZ: 10 Hz</li>
</ul>
<p>Note that this sets the rate at which the GPS module <em>reports</em> its data to the Teensy. This does <b>NOT</b> change the rate at which the GPS module updates its position fix.</p>
<p>To change that value, use the position fix update rate commands. Possible options are:</p><ul>
<li>PMTK_API_SET_FIX_CTL_100_MILLIHERTZ: Once every 10 seconds, 100 millihertz.</li>
<li>PMTK_API_SET_FIX_CTL_200_MILLIHERTZ: Once every 5 seconds, 200 millihertz.</li>
<li>PMTK_API_SET_FIX_CTL_1HZ: 1 Hz</li>
<li>PMTK_API_SET_FIX_CTL_5HZ: 5 Hz</li>
</ul>
<p>The GPS module is limited to a 5 Hz position fix update rate, but can report at 10 Hz.</p>

</div>
</div>
<a id="ae32e2b6b79a711a447a4f64f51b70de1" name="ae32e2b6b79a711a447a4f64f51b70de1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae32e2b6b79a711a447a4f64f51b70de1">&#9670;&#160;</a></span>setup_imu()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::setup_imu </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up I2C connection to IMU. </p>
<dl class="section return"><dt>Returns</dt><dd>int32_t Returns 0 if sucessful, -1 if failed. </dd></dl>
<p>The I2C connection is initiated.</p>
<p>If it fails, the function returns with an error value.</p>
<p>The range of the accelerometer is set. Possible options are:</p><ul>
<li>LSM6DS_ACCEL_RANGE_2_G: +/- 2G</li>
<li>LSM6DS_ACCEL_RANGE_4_G: +/- 4G</li>
<li>LSM6DS_ACCEL_RANGE_8_G: +/- 8G</li>
<li>LSM6DS_ACCEL_RANGE_16_G: +/- 16G</li>
</ul>
<p>The range of the gyroscope is set. Possible options are:</p><ul>
<li>LSM6DS_GYRO_RANGE_125_DPS: +/- 125 dps</li>
<li>LSM6DS_GYRO_RANGE_250_DPS: +/- 250 dps</li>
<li>LSM6DS_GYRO_RANGE_500_DPS: +/- 500 dps</li>
<li>LSM6DS_GYRO_RANGE_1000_DPS: +/- 1000 dps</li>
<li>LSM6DS_GYRO_RANGE_2000_DPS: +/- 2000 dps</li>
</ul>
<p>The data rates of the accelerometer and gyroscope are set. Possible options are:</p><ul>
<li>LSM6DS_RATE_SHUTDOWN: Power down</li>
<li>LSM6DS_RATE_12_5_HZ: 12.5 Hz</li>
<li>LSM6DS_RATE_26_HZ: 26 Hz</li>
<li>LSM6DS_RATE_52_HZ: 52 Hz</li>
<li>LSM6DS_RATE_104_HZ: 104 Hz</li>
<li>LSM6DS_RATE_208_HZ: 208 Hz</li>
<li>LSM6DS_RATE_416_HZ: 416 Hz</li>
<li>LSM6DS_RATE_833_HZ: 833 Hz</li>
<li>LSM6DS_RATE_1_66K_HZ: 1.66 kHz</li>
<li>LSM6DS_RATE_3_33K_HZ: 3.33 kHz</li>
<li>LSM6DS_RATE_6_66K_HZ: 6.66 kHz</li>
</ul>

</div>
</div>
<a id="a2f535000159f58b1b6d07e6221bc2b6d" name="a2f535000159f58b1b6d07e6221bc2b6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f535000159f58b1b6d07e6221bc2b6d">&#9670;&#160;</a></span>setup_magnetometer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::setup_magnetometer </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up I2C connection to magnetometer. </p>
<dl class="section return"><dt>Returns</dt><dd>int32_t Returns 0 if sucessful, -1 if failed. </dd></dl>
<p>The I2C connection is initiated.</p>
<p>If it fails, the function returns with an error value.</p>
<p>The performance mode of the magnetometer is set. Possible options are:</p><ul>
<li>LIS3MDL_LOWPOWERMODE: Low power mode</li>
<li>LIS3MDL_MEDIUMMODE: Medium performance mode</li>
<li>LIS3MDL_HIGHMODE: High performance mode</li>
<li>LIS3MDL_ULTRAHIGHMODE: Ultra-high performance mode</li>
</ul>
<p>The data rate of the magnetometer is set. Possible options are:</p><ul>
<li>LIS3MDL_DATARATE_0_625_HZ: 0.625 Hz</li>
<li>LIS3MDL_DATARATE_1_25_HZ: 1.25 Hz</li>
<li>LIS3MDL_DATARATE_2_5_HZ: 2.5 Hz</li>
<li>LIS3MDL_DATARATE_5_HZ: 5 Hz</li>
<li>LIS3MDL_DATARATE_10_HZ: 10 Hz</li>
<li>LIS3MDL_DATARATE_20_HZ: 20 Hz</li>
<li>LIS3MDL_DATARATE_40_HZ: 40 Hz</li>
<li>LIS3MDL_DATARATE_80_HZ: 80 Hz</li>
<li>LIS3MDL_DATARATE_155_HZ: 155 Hz</li>
<li>LIS3MDL_DATARATE_300_HZ: 300 Hz</li>
<li>LIS3MDL_DATARATE_560_HZ: 560 Hz</li>
<li>LIS3MDL_DATARATE_1000_HZ: 1000 Hz</li>
</ul>
<p>The range of the magnetometer is set. Possible options are:</p><ul>
<li>LIS3MDL_RANGE_4_GAUSS: +/- 4g</li>
<li>LIS3MDL_RANGE_8_GAUSS: +/- 8g</li>
<li>LIS3MDL_RANGE_12_GAUSS: +/- 12g</li>
<li>LIS3MDL_RANGE_16_GAUSS: +/- 16g</li>
</ul>
<p>The operation mode of the magnetometer is set. Possible options are:</p><ul>
<li>LIS3MDL_CONTINUOUSMODE: Continuous</li>
<li>LIS3MDL_SINGLEMODE: Single-shot</li>
<li>LIS3MDL_POWERDOWNMODE: Powered-down</li>
</ul>

</div>
</div>
<a id="a6e58b356d463dc4003faa85a1243d391" name="a6e58b356d463dc4003faa85a1243d391"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e58b356d463dc4003faa85a1243d391">&#9670;&#160;</a></span>setup_temperature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::setup_temperature </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up analog connection to temperature sensors. </p>
<dl class="section return"><dt>Returns</dt><dd>int32_t Always returns 0. </dd></dl>

</div>
</div>
<a id="a12f7f17c8600042480c90568d87df99a" name="a12f7f17c8600042480c90568d87df99a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12f7f17c8600042480c90568d87df99a">&#9670;&#160;</a></span>update_gps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::update_gps </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to update the GPS. </p>
<dl class="section return"><dt>Returns</dt><dd>int32_t Always returns 0. </dd></dl>
<p>The GPS is checked to see if there are any bytes available to be read. If there are, all the bytes are read in.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000032">Todo:</a></b></dt><dd>Doxygen doesn't like the empty while(){}. Correct this. </dd></dl>
<p>If the read in bytes form a new and complete NMEA sentence, parse that NMEA sentence and store the values in the <a class="el" href="artemisbeacons_8h.html#a46663bb9d8e4ea93afd7738962462170a11648e4e66e7ed6a86cb7f1d0cf604fe">object. </a></p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aac3b13097be758edcc113db85741cd1a" name="aac3b13097be758edcc113db85741cd1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac3b13097be758edcc113db85741cd1a">&#9670;&#160;</a></span>current_sensors</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, Adafruit_INA219 *&gt; Artemis::Devices::current_sensors</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">            {<span class="stringliteral">&quot;solar_panel_1&quot;</span>, <span class="keyword">new</span> Adafruit_INA219(0x40)},</div>
<div class="line">            {<span class="stringliteral">&quot;solar_panel_2&quot;</span>, <span class="keyword">new</span> Adafruit_INA219(0x41)},</div>
<div class="line">            {<span class="stringliteral">&quot;solar_panel_3&quot;</span>, <span class="keyword">new</span> Adafruit_INA219(0x42)},</div>
<div class="line">            {<span class="stringliteral">&quot;solar_panel_4&quot;</span>, <span class="keyword">new</span> Adafruit_INA219(0x43)},</div>
<div class="line">            {<span class="stringliteral">&quot;battery_board&quot;</span>, <span class="keyword">new</span> Adafruit_INA219(0x44)},</div>
<div class="line">        }</div>
</div><!-- fragment -->
<p>Mapping between current sensor string names and current sensor objects. </p>
<p>Each current sensor is instantiated as an Adafruit INA219 current sensor object. These objects are initialized with I2C addresses, allowing the sensors to share the I2C bus.</p>
<p>The mapping is as follows:</p><ul>
<li>"solar_panel_1" to 0x40</li>
<li>"solar_panel_2" to 0x41</li>
<li>"solar_panel_3" to 0x42</li>
<li>"solar_panel_4" to 0x43</li>
<li>"battery_board" to 0x44 </li>
</ul>

</div>
</div>
<a id="a646e84ab1e3f13c57a51e1302fda8269" name="a646e84ab1e3f13c57a51e1302fda8269"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a646e84ab1e3f13c57a51e1302fda8269">&#9670;&#160;</a></span>gps</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Adafruit_GPS* Artemis::Devices::gps = new Adafruit_GPS(&amp;Serial7)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The satellite's IMU. </p>
<p>An instance of the <a href="https://learn.adafruit.com/adafruit-ultimate-gps">Adafruit GPS</a> object.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Name conflicts with beacon typeID. change either this or other name to avoid ambiguity. </dd></dl>

</div>
</div>
<a id="a1d6b3415c54dd311e1181ecab7183322" name="a1d6b3415c54dd311e1181ecab7183322"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d6b3415c54dd311e1181ecab7183322">&#9670;&#160;</a></span>imu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Adafruit_LSM6DSOX* Artemis::Devices::imu = new Adafruit_LSM6DSOX()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The satellite's IMU. </p>
<p>An instance of the <a href="https://learn.adafruit.com/lsm6dsox-and-ism330dhc-6-dof-imu/">Adafruit LSM6DSOX</a> Inertial Measurement Unit (IMU) object. </p>

</div>
</div>
<a id="aa67440d9fdf0e0e77b76f86540bddf35" name="aa67440d9fdf0e0e77b76f86540bddf35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa67440d9fdf0e0e77b76f86540bddf35">&#9670;&#160;</a></span>magnetometer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Adafruit_LIS3MDL* Artemis::Devices::magnetometer = new Adafruit_LIS3MDL()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The satellite's magnetometer. </p>
<p>An instance of the <a href="https://github.com/adafruit/Adafruit_LIS3MDL">Adafruit LIS3MDL</a> magnetometer object. </p>

</div>
</div>
<a id="aa506caf5a58d33d863f91a638fe23952" name="aa506caf5a58d33d863f91a638fe23952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa506caf5a58d33d863f91a638fe23952">&#9670;&#160;</a></span>temp_sensors</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, int&gt; Artemis::Devices::temp_sensors</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">            {<span class="stringliteral">&quot;obc&quot;</span>, A0},</div>
<div class="line">            {<span class="stringliteral">&quot;pdu&quot;</span>, A1},</div>
<div class="line">            {<span class="stringliteral">&quot;battery_board&quot;</span>, A6},</div>
<div class="line">            {<span class="stringliteral">&quot;solar_panel_1&quot;</span>, A7},</div>
<div class="line">            {<span class="stringliteral">&quot;solar_panel_2&quot;</span>, A8},</div>
<div class="line">            {<span class="stringliteral">&quot;solar_panel_3&quot;</span>, A9},</div>
<div class="line">            {<span class="stringliteral">&quot;solar_panel_4&quot;</span>, A17},</div>
<div class="line">        }</div>
</div><!-- fragment -->
<p>Mapping between temperature sensor string names and their analog pins. </p>
<p>Each temperature sensor is attached to an analog-capable pin on the Teensy. This mapping ties each of those pins with the name of the sensor it is attached to.</p>
<p>The mapping is as follows:</p><ul>
<li>"obc" to analog pin 0 (physical pin 14)</li>
<li>"pdu" to analog pin 1 (physical pin 15)</li>
<li>"battery_board" to analog pin 6 (physical pin 20)</li>
<li>"solar_panel_1" to analog pin 7 (physical pin 21)</li>
<li>"solar_panel_2" to analog pin 8 (physical pin 22)</li>
<li>"solar_panel_3" to analog pin 9 (physical pin 23)</li>
<li>"solar_panel_4" to analog pin 17 (physical pin 41) </li>
</ul>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>teensy_fsw/include/<a class="el" href="artemis__devices_8h_source.html">artemis_devices.h</a></li>
<li>teensy_fsw/src/<a class="el" href="artemis__devices_8cpp.html">artemis_devices.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Artemis</b></li><li class="navelem"><a class="el" href="classArtemis_1_1Devices.html">Devices</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
