<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ke Ao Teensy Flight Software: teensy_fsw/include/channels/artemis_channels.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ke Ao Teensy Flight Software
   </div>
   <div id="projectbrief">The software on the Teensy in the Ke Ao cubesat.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('artemis__channels_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">artemis_channels.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Definitions of Artemis Channels.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="artemis__defs_8h_source.html">config/artemis_defs.h</a>&quot;</code><br />
</div>
<p><a href="artemis__channels_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a13ac2df4e3d7c1a6eeeae82d4cffaa58"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="artemis__channels_8h.html#a13ac2df4e3d7c1a6eeeae82d4cffaa58">Artemis::Teensy::Channels::Channel_ID</a> : uint8_t { <br />
&#160;&#160;<a class="el" href="artemis__channels_8h.html#a13ac2df4e3d7c1a6eeeae82d4cffaa58a5d83eb2947c0708f31f1013c704eb854">Artemis::Teensy::Channels::RFM23_CHANNEL</a> = 1
, <a class="el" href="artemis__channels_8h.html#a13ac2df4e3d7c1a6eeeae82d4cffaa58abddee6187ed4262aa27ff23c6ed54cb4">Artemis::Teensy::Channels::RFM98_CHANNEL</a>
, <a class="el" href="artemis__channels_8h.html#a13ac2df4e3d7c1a6eeeae82d4cffaa58ace153b2914c0737499790be53dd0067e">Artemis::Teensy::Channels::ASTRODEV_CHANNEL</a>
, <a class="el" href="artemis__channels_8h.html#a13ac2df4e3d7c1a6eeeae82d4cffaa58a3c0caa6af2109695c3c0cadb10863f51">Artemis::Teensy::Channels::PDU_CHANNEL</a>
, <br />
&#160;&#160;<a class="el" href="artemis__channels_8h.html#a13ac2df4e3d7c1a6eeeae82d4cffaa58a299eadc771327d56d2e8c6c95c5d86eb">Artemis::Teensy::Channels::RPI_CHANNEL</a>
<br />
 }</td></tr>
<tr class="memdesc:a13ac2df4e3d7c1a6eeeae82d4cffaa58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumeration of channel ID.  <a href="artemis__channels_8h.html#a13ac2df4e3d7c1a6eeeae82d4cffaa58">More...</a><br /></td></tr>
<tr class="separator:a13ac2df4e3d7c1a6eeeae82d4cffaa58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aead4a5fada74759d051352b3c244e50c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="artemis__channels_8h.html#aead4a5fada74759d051352b3c244e50c">Artemis::Teensy::Channels::rfm23_channel</a> ()</td></tr>
<tr class="memdesc:aead4a5fada74759d051352b3c244e50c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The operating loop for the RFM23 radio.  <br /></td></tr>
<tr class="separator:aead4a5fada74759d051352b3c244e50c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a841ed7716280f8206542a4c755e76ead"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="artemis__channels_8h.html#a841ed7716280f8206542a4c755e76ead">Artemis::Teensy::Channels::rfm98_channel</a> ()</td></tr>
<tr class="memdesc:a841ed7716280f8206542a4c755e76ead"><td class="mdescLeft">&#160;</td><td class="mdescRight">The operating loop for the RFM98 radio.  <br /></td></tr>
<tr class="separator:a841ed7716280f8206542a4c755e76ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95d12743fdb105b158bf9fa94e8a9f3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="artemis__channels_8h.html#a95d12743fdb105b158bf9fa94e8a9f3a">Artemis::Teensy::Channels::astrodev_channel</a> ()</td></tr>
<tr class="memdesc:a95d12743fdb105b158bf9fa94e8a9f3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The operating loop for the Astrodev (Li-3) radio.  <br /></td></tr>
<tr class="separator:a95d12743fdb105b158bf9fa94e8a9f3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9687387e45dcd89d44f9048d5feb4d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="artemis__channels_8h.html#ae9687387e45dcd89d44f9048d5feb4d0">Artemis::Teensy::Channels::pdu_channel</a> ()</td></tr>
<tr class="memdesc:ae9687387e45dcd89d44f9048d5feb4d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The operating loop for the <a class="el" href="classArtemis_1_1Teensy_1_1PDU.html" title="The PDU class.">PDU</a>.  <br /></td></tr>
<tr class="separator:ae9687387e45dcd89d44f9048d5feb4d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae528021d5dead3e3215dc5ef4eed93a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="artemis__channels_8h.html#ae528021d5dead3e3215dc5ef4eed93a7">Artemis::Teensy::Channels::rpi_channel</a> ()</td></tr>
<tr class="memdesc:ae528021d5dead3e3215dc5ef4eed93a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The operating loop for communications with the Raspberry Pi.  <br /></td></tr>
<tr class="separator:ae528021d5dead3e3215dc5ef4eed93a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Definitions of Artemis Channels. </p>
<p>This defines the channels used in the Teensy's main operating loop.</p>
<p>A 'channel' is used by the Teensy to multitask. Each channel acts like a <a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Operating code.">loop()</a> function in an Arduino sketch, run in parallel. The Teensy's single processor switches between sucessive channels, executing some portion of the loop when it is that channel's turn. This is called 'multithreading', with multiple 'threads' executing in parallel.</p>
<p>It is important to note that channels must be written with the assumption that they can be interrupted at any point in their execution. Thus, it is important to ensure that two channels cannot use the same resource (like a digital pin or serial connection) simultanously. To avoid this problem, we use mutual exclusions (mutexes). These are 'locks' that tie resources to a particular channel. If that channel is interrupted and another channel tries to use that same resource, it will have to wait until that mutex 'lock' is released. See <a class="el" href="artemis__defs_8h.html#a3f559eeee6c726bf8b51b84a2cfa3d07">spi1_mtx</a> for an example of mutexes used by the channels. </p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a13ac2df4e3d7c1a6eeeae82d4cffaa58" name="a13ac2df4e3d7c1a6eeeae82d4cffaa58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13ac2df4e3d7c1a6eeeae82d4cffaa58">&#9670;&#160;</a></span>Channel_ID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="artemis__channels_8h.html#a13ac2df4e3d7c1a6eeeae82d4cffaa58">Artemis::Teensy::Channels::Channel_ID</a> : uint8_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumeration of channel ID. </p>
<p>This enum represents the type of channel, using a 1-byte value. Using these identifiers, we can iterate over the channels. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a13ac2df4e3d7c1a6eeeae82d4cffaa58a5d83eb2947c0708f31f1013c704eb854" name="a13ac2df4e3d7c1a6eeeae82d4cffaa58a5d83eb2947c0708f31f1013c704eb854"></a>RFM23_CHANNEL&#160;</td><td class="fielddoc"><p>The channel controlling the RFM23 radio. </p>
</td></tr>
<tr><td class="fieldname"><a id="a13ac2df4e3d7c1a6eeeae82d4cffaa58abddee6187ed4262aa27ff23c6ed54cb4" name="a13ac2df4e3d7c1a6eeeae82d4cffaa58abddee6187ed4262aa27ff23c6ed54cb4"></a>RFM98_CHANNEL&#160;</td><td class="fielddoc"><p>The channel controlling the RFM98 radio. </p>
</td></tr>
<tr><td class="fieldname"><a id="a13ac2df4e3d7c1a6eeeae82d4cffaa58ace153b2914c0737499790be53dd0067e" name="a13ac2df4e3d7c1a6eeeae82d4cffaa58ace153b2914c0737499790be53dd0067e"></a>ASTRODEV_CHANNEL&#160;</td><td class="fielddoc"><p>The channel controlling the Astrodev (Li-3) radio. </p>
</td></tr>
<tr><td class="fieldname"><a id="a13ac2df4e3d7c1a6eeeae82d4cffaa58a3c0caa6af2109695c3c0cadb10863f51" name="a13ac2df4e3d7c1a6eeeae82d4cffaa58a3c0caa6af2109695c3c0cadb10863f51"></a>PDU_CHANNEL&#160;</td><td class="fielddoc"><p>The channel controlling the <a class="el" href="classArtemis_1_1Teensy_1_1PDU.html" title="The PDU class.">PDU</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="a13ac2df4e3d7c1a6eeeae82d4cffaa58a299eadc771327d56d2e8c6c95c5d86eb" name="a13ac2df4e3d7c1a6eeeae82d4cffaa58a299eadc771327d56d2e8c6c95c5d86eb"></a>RPI_CHANNEL&#160;</td><td class="fielddoc"><p>The channel controlling the Raspberry Pi. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a95d12743fdb105b158bf9fa94e8a9f3a" name="a95d12743fdb105b158bf9fa94e8a9f3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95d12743fdb105b158bf9fa94e8a9f3a">&#9670;&#160;</a></span>astrodev_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Artemis::Teensy::Channels::astrodev_channel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The operating loop for the Astrodev (Li-3) radio. </p>
<p>This is the equivalent of a seperate Arduino sketch for the Astrodev radio and its functions. The first portion is the equivalent to the <a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Initialization code.">setup()</a> function and is run only once. The remainder is an infinite loop, equivalent to the <a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Operating code.">loop()</a> function. </p>
<h1><a class="anchor" id="autotoc_md0"></a>
Setup</h1>
<p>This portion of the channel is run only once on startup. A serial connection to the Astrodev radio is initialized. If this initialization fails, it is retried every second. See the <a class="el" href="astrodev__channel_8cpp.html#a7a9d386221505319d175787f82700a25">astrodev_init()</a> helper function for details.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Loop</h1>
<p>This portion of the channel is run in an infinite loop. The <a class="el" href="artemis__defs_8h.html#af84bb624ddc22f5e1c52dce692eb72b5">astrodev_queue</a> is checked for a new PacketComm packet. If there is one, then that packet is sent to the Astrodev radio for transmission. The Astrodev radio's receive buffer is also checked for an incoming Astrodev frame. The Astrodev radio is then periodically polled for telemetry data. See the <a class="el" href="astrodev__channel_8cpp.html#a77301255c9f9d4c5f161652d001227d0">astrodev_send()</a> and <a class="el" href="astrodev__channel_8cpp.html#a78d39ad523f766232bc734d4b5654d6b">astrodev_recv()</a> helper functions for details on how frames and packets are handled.</p>

</div>
</div>
<a id="ae9687387e45dcd89d44f9048d5feb4d0" name="ae9687387e45dcd89d44f9048d5feb4d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9687387e45dcd89d44f9048d5feb4d0">&#9670;&#160;</a></span>pdu_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Artemis::Teensy::Channels::pdu_channel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The operating loop for the PDU. </p>
<p>This is the equivalent of a seperate Arduino sketch for the PDU and its functions. The first portion is the equivalent to the <a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Initialization code.">setup()</a> function and is run only once. The remainder is an infinite loop, equivalent to the <a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Operating code.">loop()</a> function. </p>
<h1><a class="anchor" id="autotoc_md2"></a>
Setup</h1>
<p>This portion of the channel is run only once. A serial connection is initialized, then the PDU is given 5 seconds to warm up.</p>
<p>A connection test is performed. A ping command packet is sent over the PDU serial connection, and a response is awaited. If the response is a pong data packet, a confirmation message is printed to the Teensy's serial connection.</p>
<p>The burnwire switch is set, then 10 seconds is given to allow the burnwire switch to burn. The burnwire switch is then switched off.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000040">Todo:</a></b></dt><dd>ASYNC DELAY TO ALLOW WDT RESET </dd></dl>
<h1><a class="anchor" id="autotoc_md3"></a>
Loop</h1>
<p>This portion of the channel is run in an infinite loop. The pdu_queue is checked for a new packet. This loop only handles incoming command packets. If there is one, then the desired command is executed. See the code for a detailed explaination.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000041">Todo:</a></b></dt><dd>Update WDT</dd></dl>

</div>
</div>
<a id="aead4a5fada74759d051352b3c244e50c" name="aead4a5fada74759d051352b3c244e50c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aead4a5fada74759d051352b3c244e50c">&#9670;&#160;</a></span>rfm23_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Artemis::Teensy::Channels::rfm23_channel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The operating loop for the RFM23 radio. </p>
<p>This is the equivalent of a seperate Arduino sketch for the PDU and its functions. The first portion is the equivalent to the <a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Initialization code.">setup()</a> function and is run only once. The remainder is an infinite loop, equivalent to the <a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Operating code.">loop()</a> function. </p>
<h1><a class="anchor" id="autotoc_md4"></a>
Setup</h1>
<p>This portion of the channel is run only once. A SPI connection is initialized using the <a class="el" href="artemis__defs_8h.html#a3f559eeee6c726bf8b51b84a2cfa3d07">spi1_mtx</a> mutex.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Loop</h1>
<p>This portion of the channel is run in an infinite loop. The rfm23_queue is checked for a new packet. This loop only handles outgoing data packets. If there is one, then the desired packet is transmitted. The RFM23's receive buffer is also checked for an incoming packet. If there is one, it is copied to the main_queue. Additionally, telemetry packets are sent at regular intervals. See the code for a detailed explaination.</p>

</div>
</div>
<a id="a841ed7716280f8206542a4c755e76ead" name="a841ed7716280f8206542a4c755e76ead"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a841ed7716280f8206542a4c755e76ead">&#9670;&#160;</a></span>rfm98_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Artemis::Teensy::Channels::rfm98_channel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The operating loop for the RFM98 radio. </p>
<p>This is the equivalent of a seperate Arduino sketch for the RFM98 radio and its functions. The first portion is the equivalent to the <a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Initialization code.">setup()</a> function and is run only once. The remainder is an infinite loop, equivalent to the <a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Operating code.">loop()</a> function. </p>
<h1><a class="anchor" id="autotoc_md6"></a>
Setup</h1>
<p>This portion of the channel is run only once. A SPI connection is initialized using the <a class="el" href="artemis__defs_8h.html#a3f559eeee6c726bf8b51b84a2cfa3d07">spi1_mtx</a> mutex.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Loop</h1>
<p>This portion of the channel is run in an infinite loop. The rfm98_queue is checked for a new packet. If there is one, then the desired packet is transmitted. The RFM98's receive buffer is also checked for an incoming packet. If there is one, it is copied to the main_queue. See the code for a detailed explaination.</p>

</div>
</div>
<a id="ae528021d5dead3e3215dc5ef4eed93a7" name="ae528021d5dead3e3215dc5ef4eed93a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae528021d5dead3e3215dc5ef4eed93a7">&#9670;&#160;</a></span>rpi_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Artemis::Teensy::Channels::rpi_channel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The operating loop for communications with the Raspberry Pi. </p>
<p>This is the equivalent of a seperate Arduino sketch for communicating with the Raspberry Pi. The first portion is the equivalent to the <a class="el" href="main_8cpp.html#a4fc01d736fe50cf5b977f755b675f11d" title="Initialization code.">setup()</a> function and is run only once. The remainder is an infinite loop, equivalent to the <a class="el" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Operating code.">loop()</a> function. </p>
<h1><a class="anchor" id="autotoc_md8"></a>
Setup</h1>
<p>This portion of the channel is run only once. An I2C connection is initialized between the Teensy and Raspberry Pi, with the Teensy as slave and Raspberry Pi as master. The helper functions <a class="el" href="rpi__channel_8cpp.html#a16c554efd85d642b49069c9e3214b358" title="Helper function to receive data from the Raspberry Pi.">receiveData()</a> and <a class="el" href="rpi__channel_8cpp.html#a95b1b253ee46df6a93285803cf1f3370" title="Helper function to send data to the Raspberry Pi.">sendData()</a> are registered as helper functions to be invoked when data is transfered between the Teensy and Raspberry Pi. The <a class="el" href="artemis__defs_8h.html#adbc205829919a2bf55d1ebcf0e2e1c97a888fbd62097190b17ae61eb840dc6bd0">Raspberry Pi status pin </a> is also set as an input.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Loop</h1>
<p>This portion of the channel is run in an infinite loop. The rpi_queue is checked for a new packet. If there is one, and there is no packet already ready to be sent, then the packet is packaged for transmission to the Raspberry Pi. The loop also checks for the special case where the packet is a command to shut down the Raspberry Pi. See the code for a detailed explaination.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000042">Todo:</a></b></dt><dd>This code only handles sending packets <em>to</em> the Raspberry Pi. It does not handle receiving packets <em>from</em> the Raspberry Pi and adding them to the main_queue. Implement this functionality. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d3431abf3635df4ecc3460510eb8d42d.html">teensy_fsw</a></li><li class="navelem"><a class="el" href="dir_c7cba72cdc5a174b782d79a97658f075.html">include</a></li><li class="navelem"><a class="el" href="dir_ff516368061b224ad964848b76cec971.html">channels</a></li><li class="navelem"><a class="el" href="artemis__channels_8h.html">artemis_channels.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
