<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ke Ao Teensy Flight Software: Artemis::Devices::Magnetometer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ke Ao Teensy Flight Software
   </div>
   <div id="projectbrief">The software on the Teensy in the Ke Ao cubesat.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classArtemis_1_1Devices_1_1Magnetometer.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classArtemis_1_1Devices_1_1Magnetometer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Artemis::Devices::Magnetometer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The satellite's magnetometer.  
 <a href="classArtemis_1_1Devices_1_1Magnetometer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="artemis__devices_8h_source.html">artemis_devices.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structArtemis_1_1Devices_1_1Magnetometer_1_1magbeacon.html">magbeacon</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The magnetometer beacon structure.  <a href="structArtemis_1_1Devices_1_1Magnetometer_1_1magbeacon.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a614e983c27df3c8caf6667fdf273e57a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices_1_1Magnetometer.html#a614e983c27df3c8caf6667fdf273e57a">setup</a> (void)</td></tr>
<tr class="memdesc:a614e983c27df3c8caf6667fdf273e57a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up I2C connection to magnetometer.  <br /></td></tr>
<tr class="separator:a614e983c27df3c8caf6667fdf273e57a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7ffa09391e709dd7b332b78e3f815bd"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices_1_1Magnetometer.html#ac7ffa09391e709dd7b332b78e3f815bd">read</a> (uint32_t uptime)</td></tr>
<tr class="memdesc:ac7ffa09391e709dd7b332b78e3f815bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads magnetometer and generates a packet on both <a class="el" href="classArtemis_1_1Devices_1_1RFM23.html" title="The satellite&#39;s RFM23 radio.">RFM23</a> and <a class="el" href="classArtemis_1_1Devices_1_1Astrodev.html" title="The satellite&#39;s Astrodev (Li-3) radio.">Astrodev</a> queues.  <br /></td></tr>
<tr class="separator:ac7ffa09391e709dd7b332b78e3f815bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3cd97e81f49b9528bd921b4ca1202640"><td class="memItemLeft" align="right" valign="top"><a id="a3cd97e81f49b9528bd921b4ca1202640" name="a3cd97e81f49b9528bd921b4ca1202640"></a>
Adafruit_LIS3MDL *&#160;</td><td class="memItemRight" valign="bottom"><b>magnetometer</b> = new Adafruit_LIS3MDL()</td></tr>
<tr class="separator:a3cd97e81f49b9528bd921b4ca1202640"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The satellite's magnetometer. </p>
<p>An instance of the <a href="https://github.com/adafruit/Adafruit_LIS3MDL">Adafruit LIS3MDL</a> magnetometer object. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac7ffa09391e709dd7b332b78e3f815bd" name="ac7ffa09391e709dd7b332b78e3f815bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7ffa09391e709dd7b332b78e3f815bd">&#9670;&#160;</a></span>read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::Magnetometer::read </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uptime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads magnetometer and generates a packet on both <a class="el" href="classArtemis_1_1Devices_1_1RFM23.html" title="The satellite&#39;s RFM23 radio.">RFM23</a> and <a class="el" href="classArtemis_1_1Devices_1_1Astrodev.html" title="The satellite&#39;s Astrodev (Li-3) radio.">Astrodev</a> queues. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uptime</td><td>The time, in milliseconds, that the Teensy has been powered on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int32_t Returns 0 on successful read, -1 if failed. </dd></dl>
<p>The magnetometer is only polled if it has been set up.</p>
<p>A packet and magnetometer beacon are created. The beacon is given an identification value.</p>
<p>The magnetometer is polled for its most recent measurement. This measurement is then saved in the magnetometer beacon.</p>
<p>The packet's header information is filled out, identifying the originator node, destination node, and packet type. The beacon is then copied into the payload of the packet. The packet is then copied into the <a class="el" href="classArtemis_1_1Devices_1_1RFM23.html" title="The satellite&#39;s RFM23 radio.">RFM23</a> and <a class="el" href="classArtemis_1_1Devices_1_1Astrodev.html" title="The satellite&#39;s Astrodev (Li-3) radio.">Astrodev</a> queues for transmission.</p>

</div>
</div>
<a id="a614e983c27df3c8caf6667fdf273e57a" name="a614e983c27df3c8caf6667fdf273e57a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a614e983c27df3c8caf6667fdf273e57a">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::Magnetometer::setup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up I2C connection to magnetometer. </p>
<dl class="section return"><dt>Returns</dt><dd>int32_t Returns 0 if sucessful, -1 if failed. </dd></dl>
<p>The I2C connection is initiated.</p>
<p>If it fails, the function returns with an error value.</p>
<p>The performance mode of the magnetometer is set. Possible options are:</p><ul>
<li>LIS3MDL_LOWPOWERMODE: Low power mode</li>
<li>LIS3MDL_MEDIUMMODE: Medium performance mode</li>
<li>LIS3MDL_HIGHMODE: High performance mode</li>
<li>LIS3MDL_ULTRAHIGHMODE: Ultra-high performance mode</li>
</ul>
<p>The data rate of the magnetometer is set. Possible options are:</p><ul>
<li>LIS3MDL_DATARATE_0_625_HZ: 0.625 Hz</li>
<li>LIS3MDL_DATARATE_1_25_HZ: 1.25 Hz</li>
<li>LIS3MDL_DATARATE_2_5_HZ: 2.5 Hz</li>
<li>LIS3MDL_DATARATE_5_HZ: 5 Hz</li>
<li>LIS3MDL_DATARATE_10_HZ: 10 Hz</li>
<li>LIS3MDL_DATARATE_20_HZ: 20 Hz</li>
<li>LIS3MDL_DATARATE_40_HZ: 40 Hz</li>
<li>LIS3MDL_DATARATE_80_HZ: 80 Hz</li>
<li>LIS3MDL_DATARATE_155_HZ: 155 Hz</li>
<li>LIS3MDL_DATARATE_300_HZ: 300 Hz</li>
<li>LIS3MDL_DATARATE_560_HZ: 560 Hz</li>
<li>LIS3MDL_DATARATE_1000_HZ: 1000 Hz</li>
</ul>
<p>The range of the magnetometer is set. Possible options are:</p><ul>
<li>LIS3MDL_RANGE_4_GAUSS: +/- 4g</li>
<li>LIS3MDL_RANGE_8_GAUSS: +/- 8g</li>
<li>LIS3MDL_RANGE_12_GAUSS: +/- 12g</li>
<li>LIS3MDL_RANGE_16_GAUSS: +/- 16g</li>
</ul>
<p>The operation mode of the magnetometer is set. Possible options are:</p><ul>
<li>LIS3MDL_CONTINUOUSMODE: Continuous</li>
<li>LIS3MDL_SINGLEMODE: Single-shot</li>
<li>LIS3MDL_POWERDOWNMODE: Powered-down</li>
</ul>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>teensy_fsw/include/<a class="el" href="artemis__devices_8h_source.html">artemis_devices.h</a></li>
<li>teensy_fsw/src/<a class="el" href="artemis__devices_8cpp.html">artemis_devices.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Artemis</b></li><li class="navelem"><a class="el" href="namespaceArtemis_1_1Devices.html">Devices</a></li><li class="navelem"><a class="el" href="classArtemis_1_1Devices_1_1Magnetometer.html">Magnetometer</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
