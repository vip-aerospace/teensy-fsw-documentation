<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ke Ao Teensy Flight Software: Artemis::Devices::GPS Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ke Ao Teensy Flight Software
   </div>
   <div id="projectbrief">The software on the Teensy in the Ke Ao cubesat.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classArtemis_1_1Devices_1_1GPS.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classArtemis_1_1Devices_1_1GPS-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Artemis::Devices::GPS Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The satellite's Global Positioning System (<a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a>).  
 <a href="classArtemis_1_1Devices_1_1GPS.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="artemis__devices_8h_source.html">artemis_devices.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structArtemis_1_1Devices_1_1GPS_1_1gpsbeacon.html">gpsbeacon</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> beacon structure.  <a href="structArtemis_1_1Devices_1_1GPS_1_1gpsbeacon.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad4a9fdba79b8a19046a3036fb1a8b701"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices_1_1GPS.html#ad4a9fdba79b8a19046a3036fb1a8b701">setup</a> (void)</td></tr>
<tr class="memdesc:ad4a9fdba79b8a19046a3036fb1a8b701"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up serial connection to <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> sensor.  <br /></td></tr>
<tr class="separator:ad4a9fdba79b8a19046a3036fb1a8b701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad683410c7269b9f925675c59669d733"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices_1_1GPS.html#aad683410c7269b9f925675c59669d733">update</a> (void)</td></tr>
<tr class="memdesc:aad683410c7269b9f925675c59669d733"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to update the <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a>.  <br /></td></tr>
<tr class="separator:aad683410c7269b9f925675c59669d733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8af6875fe48d0b81bae9cde222bb9eed"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArtemis_1_1Devices_1_1GPS.html#a8af6875fe48d0b81bae9cde222bb9eed">read</a> (uint32_t uptime)</td></tr>
<tr class="memdesc:a8af6875fe48d0b81bae9cde222bb9eed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> sensor and generates a packet on both <a class="el" href="classArtemis_1_1Devices_1_1RFM23.html" title="The satellite&#39;s RFM23 radio.">RFM23</a> and <a class="el" href="classArtemis_1_1Devices_1_1Astrodev.html" title="The satellite&#39;s Astrodev (Li-3) radio.">Astrodev</a> queues.  <br /></td></tr>
<tr class="separator:a8af6875fe48d0b81bae9cde222bb9eed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a8b92ab30c785ed2b4f75de1523ce036f"><td class="memItemLeft" align="right" valign="top"><a id="a8b92ab30c785ed2b4f75de1523ce036f" name="a8b92ab30c785ed2b4f75de1523ce036f"></a>
Adafruit_GPS *&#160;</td><td class="memItemRight" valign="bottom"><b>gps</b> = new Adafruit_GPS(&amp;Serial7)</td></tr>
<tr class="separator:a8b92ab30c785ed2b4f75de1523ce036f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The satellite's Global Positioning System (<a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a>). </p>
<p>An instance of the <a href="https://learn.adafruit.com/adafruit-ultimate-gps">Adafruit GPS</a> object. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a8af6875fe48d0b81bae9cde222bb9eed" name="a8af6875fe48d0b81bae9cde222bb9eed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8af6875fe48d0b81bae9cde222bb9eed">&#9670;&#160;</a></span>read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::GPS::read </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uptime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> sensor and generates a packet on both <a class="el" href="classArtemis_1_1Devices_1_1RFM23.html" title="The satellite&#39;s RFM23 radio.">RFM23</a> and <a class="el" href="classArtemis_1_1Devices_1_1Astrodev.html" title="The satellite&#39;s Astrodev (Li-3) radio.">Astrodev</a> queues. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uptime</td><td>The time, in milliseconds, that the Teensy has been powered on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int32_t Returns 0 if successful, -1 if <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> has not been set up yet. </dd></dl>
<p>The <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> data is only transmitted if it has been set up.</p>
<p>A packet and <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> beacon are created. The beacon is given an identification value.</p>
<p>Each temperature sensor is iterated over. It is read via its analog pin, with that raw voltage reading converted to Celcius. It is then stored in the temperature beacon's array.</p>
<p>The packet's header information is filled out, identifying the originator node, destination node, and packet type. The beacon is then copied into the payload of the packet. The packet is then copied into the <a class="el" href="classArtemis_1_1Devices_1_1RFM23.html" title="The satellite&#39;s RFM23 radio.">RFM23</a> and <a class="el" href="classArtemis_1_1Devices_1_1Astrodev.html" title="The satellite&#39;s Astrodev (Li-3) radio.">Astrodev</a> queues for transmission.</p>

</div>
</div>
<a id="ad4a9fdba79b8a19046a3036fb1a8b701" name="ad4a9fdba79b8a19046a3036fb1a8b701"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4a9fdba79b8a19046a3036fb1a8b701">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::GPS::setup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up serial connection to <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> sensor. </p>
<dl class="section return"><dt>Returns</dt><dd>int32_t Returns 0 on successful initialization, -1 if failed. </dd></dl>
<p>The serial connection to the <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> module is initialized. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000027">Todo:</a></b></dt><dd>The Adafruit <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> library has a bug. Connecting over serial always returns true. </dd></dl>
<p>The output format of the <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> is set. Possible options are:</p><ul>
<li>PMTK_SET_NMEA_OUTPUT_GLLONLY: Latitude, longitude, UTC time of position fix and status.</li>
<li>PMTK_SET_NMEA_OUTPUT_RMCONLY: Time, date, position, course, speed data.</li>
<li>PMTK_SET_NMEA_OUTPUT_VTGONLY: Course, speed information relative to the ground.</li>
<li>PMTK_SET_NMEA_OUTPUT_GGAONLY: Time, position, fix type data.</li>
<li>PMTK_SET_NMEA_OUTPUT_GSAONLY: <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> receiver operating mode, satellites used in the position solution, DOP values.</li>
<li>PMTK_SET_NMEA_OUTPUT_GSVONLY: Number of satellites in view, satellite ID numbers, elevation, azimuth, SNR values.</li>
<li>PMTK_SET_NMEA_OUTPUT_RMCGGA: Time, date, position, course and speed data.</li>
<li>PMTK_SET_NMEA_OUTPUT_RMCGGAGSA: Time, date, position, course and speed data, <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> receiver operating mode, satellites used in the position solution, DOP values, Global positioning system fix data (time, position, fix type data).</li>
<li>PMTK_SET_NMEA_OUTPUT_ALLDATA: All possible data from the <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> module.</li>
<li>PMTK_SET_NMEA_OUTPUT_OFF: Disable <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> output.</li>
</ul>
<p>The update rate of the <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> is set. Possible options are:</p><ul>
<li>PMTK_SET_NMEA_UPDATE_100_MILLIHERTZ: Once every 10 seconds, 100 millihertz.</li>
<li>PMTK_SET_NMEA_UPDATE_200_MILLIHERTZ: Once every 5 seconds, 200 millihertz.</li>
<li>PMTK_SET_NMEA_UPDATE_1HZ: 1 Hz</li>
<li>PMTK_SET_NMEA_UPDATE_2HZ: 2 Hz</li>
<li>PMTK_SET_NMEA_UPDATE_5HZ: 5 Hz</li>
<li>PMTK_SET_NMEA_UPDATE_10HZ: 10 Hz</li>
</ul>
<p>Note that this sets the rate at which the <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> module <em>reports</em> its data to the Teensy. This does <b>NOT</b> change the rate at which the <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> module updates its position fix.</p>
<p>To change that value, use the position fix update rate commands. Possible options are:</p><ul>
<li>PMTK_API_SET_FIX_CTL_100_MILLIHERTZ: Once every 10 seconds, 100 millihertz.</li>
<li>PMTK_API_SET_FIX_CTL_200_MILLIHERTZ: Once every 5 seconds, 200 millihertz.</li>
<li>PMTK_API_SET_FIX_CTL_1HZ: 1 Hz</li>
<li>PMTK_API_SET_FIX_CTL_5HZ: 5 Hz</li>
</ul>
<p>The <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> module is limited to a 5 Hz position fix update rate, but can report at 10 Hz.</p>

</div>
</div>
<a id="aad683410c7269b9f925675c59669d733" name="aad683410c7269b9f925675c59669d733"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad683410c7269b9f925675c59669d733">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Artemis::Devices::GPS::update </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to update the <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>int32_t Returns 0 if able to poll the <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a>, -1 if <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> has not been set up yet. Note this does not guarantee that new data has been received, just that we are able to check the <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> for available bytes. </dd></dl>
<p>The <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> is only checked if it has been set up.</p>
<p>The <a class="el" href="classArtemis_1_1Devices_1_1GPS.html" title="The satellite&#39;s Global Positioning System (GPS).">GPS</a> is checked to see if there are any bytes available to be read. If there are, all the bytes are read in.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000028">Todo:</a></b></dt><dd>Doxygen doesn't like the empty while(){}. Correct this. </dd></dl>
<p>If the read in bytes form a new and complete NMEA sentence, parse that NMEA sentence and store the values in the <a class="el" href="#a8b92ab30c785ed2b4f75de1523ce036f">object. </a></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="artemis__devices_8h_source.html">artemis_devices.h</a></li>
<li>src/<a class="el" href="artemis__devices_8cpp.html">artemis_devices.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Artemis</b></li><li class="navelem"><a class="el" href="namespaceArtemis_1_1Devices.html">Devices</a></li><li class="navelem"><a class="el" href="classArtemis_1_1Devices_1_1GPS.html">GPS</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
