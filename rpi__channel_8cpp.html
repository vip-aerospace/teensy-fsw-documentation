<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ke Ao Teensy Flight Software: teensy_fsw/src/channels/rpi_channel.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ke Ao Teensy Flight Software
   </div>
   <div id="projectbrief">The software on the Teensy in the Ke Ao cubesat.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('rpi__channel_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">rpi_channel.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>The channel controlling communications to the Raspberry Pi.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="artemis__channels_8h_source.html">channels/artemis_channels.h</a>&quot;</code><br />
<code>#include &lt;i2c_driver_wire.h&gt;</code><br />
<code>#include &lt;<a class="el" href="pdu_8h_source.html">pdu.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a16c554efd85d642b49069c9e3214b358"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpi__channel_8cpp.html#a16c554efd85d642b49069c9e3214b358">receiveData</a> (int byte_count)</td></tr>
<tr class="memdesc:a16c554efd85d642b49069c9e3214b358"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to receive data from the Raspberry Pi.  <br /></td></tr>
<tr class="separator:a16c554efd85d642b49069c9e3214b358"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b1b253ee46df6a93285803cf1f3370"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rpi__channel_8cpp.html#a95b1b253ee46df6a93285803cf1f3370">sendData</a> ()</td></tr>
<tr class="memdesc:a95b1b253ee46df6a93285803cf1f3370"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to send data to the Raspberry Pi.  <br /></td></tr>
<tr class="separator:a95b1b253ee46df6a93285803cf1f3370"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The channel controlling communications to the Raspberry Pi. </p>
<p>This is the channel that controls the communication to the Raspberry Pi on the OBC, in parallel to all other channels. When it gets a slice of computing time on the Teensy's processor, it performs actions related to the Raspberry Pi. This channel must be written such that it can be interrupted at any time to switch to the next channel. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a16c554efd85d642b49069c9e3214b358" name="a16c554efd85d642b49069c9e3214b358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16c554efd85d642b49069c9e3214b358">&#9670;&#160;</a></span>receiveData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void receiveData </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>byte_count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to receive data from the Raspberry Pi. </p>
<p>This function should be written to be as fast as possible as it is an interrupt service method. Most of the processing should be done in the infinite loop in the rpi_channel() function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">byte_count</td><td>The number of bytes to be received from the Raspberry Pi. </td></tr>
  </table>
  </dd>
</dl>
<p>If there are no bytes to be read, do nothing.</p>
<p>The I2C1 interface is locked for the exclusive use by the Raspberry Pi channel. For each byte in the message, it is copied in from the I2C interface and printed to the Teensy's serial console.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000036">Todo:</a></b></dt><dd>The message should be packaged into a packet and copied into the main_queue. </dd></dl>

</div>
</div>
<a id="a95b1b253ee46df6a93285803cf1f3370" name="a95b1b253ee46df6a93285803cf1f3370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95b1b253ee46df6a93285803cf1f3370">&#9670;&#160;</a></span>sendData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to send data to the Raspberry Pi. </p>
<p>This function should be written to be as fast as possible as it is an interrupt service method. Most of the processing should be done in the infinite loop in the rpi_channel() function. </p>
<p>The I2C1 interface is locked for the exclusive use by the Raspberry Pi channel.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000037">Todo:</a></b></dt><dd>The message should be packaged into a packet and copied into the main_queue. </dd></dl>
<p>For each byte in the packet, it is written to the I2C interface and printed to the Teensy's serial console. The ready flag is then reset to give the Raspberry Pi loop time to wrap the next packet.</p>
<p>NOTE: Serial.print() is really, really slow. Minimize use of it.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d3431abf3635df4ecc3460510eb8d42d.html">teensy_fsw</a></li><li class="navelem"><a class="el" href="dir_743e2551979b98a09a056e2f9873d78e.html">src</a></li><li class="navelem"><a class="el" href="dir_e5f081f33169210e043d0b2a3f7c2f5c.html">channels</a></li><li class="navelem"><a class="el" href="rpi__channel_8cpp.html">rpi_channel.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
